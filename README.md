### B站自动评论油猴脚本，由DeepSeek编写

# Bilibili 自动评论油猴脚本

一个功能强大的 Tampermonkey 脚本，帮助你自动化管理 B 站视频评论。支持**多系列表情包随机插入**（可放在开头、结尾或标点后）、**根据文案长度动态调整表情包数量**（4-15个）、**系列自动补齐**（若所选系列元素不足自动添加更多系列）等功能，让每条评论都独一无二。

## ⚖️ 免责声明
本脚本**仅供学习和交流使用**，请勿用于任何违反 Bilibili 社区规则或国家法律法规的用途。

使用本脚本所产生的任何后果（包括但不限于账号被禁言、封禁等）均由**用户自行承担**，开发者不承担任何责任。

请遵守 B 站的用户协议，合理设置发送间隔（建议≥30秒），避免对他人造成骚扰。

开发者保留在任何时候停止更新或删除本脚本的权利。

## ✨ 功能特点

- ✅ **自动发送评论** – 按照设定的时间间隔，循环从文案库中随机选择一条发送。
- ✅ **自定义文案库** – 在面板中按行输入多条评论文案，脚本会随机挑选。
- ✅ **智能表情包分布** – 随机将表情包放在**开头、结尾**或**标点符号后**，避免夹在两个标点之间，阅读体验更自然。
- ✅ **多系列表情包库** – 内置 17+ 个表情包系列（Ave Mujica、Mygo、25年度、热词、小会员绿豆人、大会员粉豆人、宇宙机器人、那兔、小绿和小蓝、崩坏3、2233娘、鹿鸣、罗小黑等），总计近 500 个表情元素。
- ✅ **动态表情包数量** – 根据文案长度自动调整抽取范围：
  - 短文本（<5字）：4-8个
  - 中等文本（5-20字）：4-15个
  - 长文本（>20字）：8-15个
- ✅ **系列随机选择与补齐** – 每次随机使用1-2个系列，若所选系列元素总数不足所需数量，会自动添加更多不重复的系列，确保总能抽到足够表情包。
- ✅ **精确定位** – 深入多层 Shadow DOM，精准找到 B 站最新的评论区输入框和发布按钮，兼容性高。
- ✅ **手动发送测试** – 提供“发一次”按钮，方便随时测试脚本是否正常工作。
- ✅ **自动停止机制** – 连续失败 3 次后自动停止，避免无限重试。
- ✅ **可拖拽面板** – 右上角的控制面板可随意拖动，不影响观看视频。

## 📥 安装方法

1. 确保你的浏览器已安装 [Tampermonkey](https://www.tampermonkey.net/) 扩展。
2. 点击以下链接直接安装脚本（需科学上网或直接访问 GitHub raw）：
   - [**安装最新版本 v8.1**](https://raw.githubusercontent.com/GSJNZH/Bilibili-Auto-Comment-Tampermonkey-Script/refs/heads/main/bilibili-autocomment.user.js)
3. 或者，手动复制 [bilibili-autocomment.user.js](https://github.com/GSJNZH/Bilibili-Auto-Comment-Tampermonkey-Script/blob/main/bilibili-autocomment.user.js) 的全部代码，在 Tampermonkey 中新建脚本并粘贴保存。

## 📖 使用方法

1. 打开**明日方舟夏日嘉年华限时活动宣传PV** （ `https://www.bilibili.com/video/BV1fy4y1L7Rq/`）。
2. 页面右上角会出现一个 **“📝 B站自动评论 v8.1”** 的控制面板。
3. 在文本框中输入你的评论文案，**每行一条**（默认有示例）。
4. 设置**间隔秒数**（建议 30 秒以上）。
5. 点击 **“发一次”** 测试发送一条评论，观察控制台（F12）输出，确保能正常发送。
6. 测试成功后，点击 **“▶ 开始自动”** 启动循环发送；点击 **“⏹️ 停止”** 可随时终止。
7. 面板标题栏可**拖动**，避免遮挡视频。

## 🎨 自定义指南

### 1. 修改表情包系列或元素
在脚本开头的 `SERIES` 对象中，你可以自由增删系列或修改每个系列内的表情包元素。例如：

```javascript
const SERIES = {
    mySeries: [
        '[自定义表情1]',
        '[自定义表情2]',
        // ...
    ],
    // 其他系列...
};
```

### 2. 调整表情包数量范围
在 `sendOneComment` 函数中找到以下代码：

```javascript
let minCount = 4;
let maxCount = 15;
if (commentLength < 5) {
    maxCount = 8;
} else if (commentLength > 20) {
    minCount = 8;
}
```

你可以修改 `4`、`15`、`8` 等数值，改变不同长度文案的表情包数量上下限。

### 3. 控制系列个数
默认每次随机使用 1-2 个系列，如需固定使用更多系列，可修改：

```javascript
const seriesCount = Math.floor(Math.random() * 2) + 1; // 1 或 2
```

改为固定值（如 `const seriesCount = 3;`）即可。

## ⚠️ 注意事项

- **请合理使用**：发送间隔不要太短（建议 ≥30 秒），否则容易触发 B 站风控，甚至导致账号受限。
- **需要登录**：脚本依赖你的 B 站登录状态，请确保已登录。
- **页面更新**：B 站可能会在未来更新页面结构，导致脚本失效。如果发现不能用，欢迎提 [Issue](https://github.com/GSJNZH/Bilibili-Auto-Comment-Tampermonkey-Script/issues) 反馈，我会尽力修复。
- **报错无关紧要**：控制台出现的 `ReporterPb 加载失败` 是 B 站自身的统计脚本错误，不影响本脚本运行。

## 📅 更新日志

### v8.1
- **新增系列补齐机制**：若所选系列元素不足，自动添加更多系列，确保总能抽到足够表情包。
- **新增大量表情包系列**：小会员绿豆人、大会员粉豆人、拜年纪2022、宇宙机器人、那兔、小绿和小蓝、崩坏3、2233娘、鹿鸣、罗小黑，总计新增近 300 个表情元素。
- **优化标点后插入**：合并连续标点，避免表情包被夹在两个标点之间。

### v8.0
- 表情包仅分布在开头、结尾或标点后，不再插入两个标点之间。
- 合并连续标点组，提高分布自然度。

### v7.8
- 支持每次使用1-2个系列，数量范围改为4-15个。
- 处理连续英文点号（如 `......`）为一个标点。

### v7.5
- 热词系列大幅扩容，新增 80+ 个热词表情包。

### v6.7
- 小尾巴抽取数量随机范围设为 **5~18** 个。
- 优化抽取逻辑，确保每次组合更随机。

### 更早版本
- 逐步添加了多系列支持、智能分布、动态数量等功能。

## 📄 许可证

[MIT](LICENSE) © GSJNZH

## 🤝 贡献

如果你有好的建议或发现了 Bug，欢迎：
- 提交 [Issue](https://github.com/GSJNZH/Bilibili-Auto-Comment-Tampermonkey-Script/issues)
- 发起 [Pull Request](https://github.com/GSJNZH/Bilibili-Auto-Comment-Tampermonkey-Script/pulls)

如果觉得脚本对你有帮助，不妨点个 ⭐ 支持一下！
